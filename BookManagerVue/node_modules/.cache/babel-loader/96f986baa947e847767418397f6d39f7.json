{"remainingRequest":"D:\\BookManager\\BookManagerVue\\node_modules\\babel-loader\\lib\\index.js!D:\\BookManager\\BookManagerVue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\BookManager\\BookManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\BookManager\\BookManagerVue\\src\\views\\pie\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\BookManager\\BookManagerVue\\src\\views\\pie\\index.vue","mtime":1719041856000},{"path":"D:\\BookManager\\BookManagerVue\\babel.config.js","mtime":1713778488000},{"path":"D:\\BookManager\\BookManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713778494000},{"path":"D:\\BookManager\\BookManagerVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1713778492000},{"path":"D:\\BookManager\\BookManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713778494000},{"path":"D:\\BookManager\\BookManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1713778512000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiRDovQm9va01hbmFnZXIvQm9va01hbmFnZXJWdWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJEOi9Cb29rTWFuYWdlci9Cb29rTWFuYWdlclZ1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwovLwovLwovLwovLwoKaW1wb3J0ICogYXMgZWNoYXJ0cyBmcm9tICdlY2hhcnRzJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsgLy8g5YGH6K6+5L2/55SoIEF4aW9zIOi/m+ihjEhUVFDor7fmsYIKaW1wb3J0IHsKLy8gLi4uICjlhbbku5blr7zlhaXkv53mjIHkuI3lj5gpCnF1ZXJ5Qm9va0luZm9zIH0gZnJvbSAiQC9hcGkvYm9va2luZm8iOwoKLy8g5rOo5oSP77ya6L+Z6YeM5Y+q5L+d55WZ5LiA5Liq5byC5q2l54mI5pys55qEIGdldFBpZUNoYXJ0RGF0YSDlh73mlbAKZnVuY3Rpb24gZ2V0UGllQ2hhcnREYXRhKCkgewogIHJldHVybiBfZ2V0UGllQ2hhcnREYXRhLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KZnVuY3Rpb24gX2dldFBpZUNoYXJ0RGF0YSgpIHsKICBfZ2V0UGllQ2hhcnREYXRhID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgIHZhciByZXNwb25zZSwgZm9ybWF0dGVkRGF0YTsKICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBfY29udGV4dDIucHJldiA9IDA7CiAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjkxMTEvQm9va01hbmFnZXIvYm9va0luZm8vcXVlcnlCb29rSW5mb3MnKTsKICAgICAgICBjYXNlIDM6CiAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgaWYgKCEocmVzcG9uc2UgJiYgcmVzcG9uc2UuZGF0YSkpIHsKICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBmb3JtYXR0ZWREYXRhID0gcmVzcG9uc2UuZGF0YS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICBuYW1lOiBpdGVtLmJvb2tuYW1lLAogICAgICAgICAgICAgIC8vIOWBh+iuvuWQjuerr+eahOagh+mimOWtl+auteS4unRpdGxlCiAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0uYm9va19udW0gLy8g5YGH6K6+5ZCO56uv55qE5pWw6YeP5a2X5q615Li6Y291bnQKICAgICAgICAgICAgfTsKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIGZvcm1hdHRlZERhdGEpOwogICAgICAgIGNhc2UgMTA6CiAgICAgICAgICBjb25zb2xlLmVycm9yKCfojrflj5bmlbDmja7lpLHotKUnKTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBbXSk7CiAgICAgICAgY2FzZSAxMjoKICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTg7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDE0OgogICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAxNDsKICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgwKTsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+ivt+axguaVsOaNruaXtuWPkeeUn+mUmeivrycsIF9jb250ZXh0Mi50MCk7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgW10pOwogICAgICAgIGNhc2UgMTg6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICB9CiAgICB9LCBfY2FsbGVlMiwgbnVsbCwgW1swLCAxNF1dKTsKICB9KSk7CiAgcmV0dXJuIF9nZXRQaWVDaGFydERhdGEuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNoYXJ0SW5zdGFuY2U6IG51bGwsCiAgICAgIHBpZURhdGE6IFtdCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdENoYXJ0OiBmdW5jdGlvbiBpbml0Q2hhcnQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGRhdGFGcm9tQmFja2VuZCwgb3B0aW9uOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBnZXRQaWVDaGFydERhdGEoKTsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGRhdGFGcm9tQmFja2VuZCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YUZyb21CYWNrZW5kKTsKICAgICAgICAgICAgICBpZiAoZGF0YUZyb21CYWNrZW5kICYmIGRhdGFGcm9tQmFja2VuZC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5waWVEYXRhID0gZGF0YUZyb21CYWNrZW5kLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZQogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF90aGlzLmNoYXJ0SW5zdGFuY2UgPSBlY2hhcnRzLmluaXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BpZS1jaGFydCcpKTsKICAgICAgICAgICAgICBvcHRpb24gPSB7CiAgICAgICAgICAgICAgICB0b29sdGlwOiB7CiAgICAgICAgICAgICAgICAgIHRyaWdnZXI6ICdpdGVtJwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIC8vIGxlZ2VuZDogewogICAgICAgICAgICAgICAgLy8gICBvcmllbnQ6ICd2ZXJ0aWNhbCcsCiAgICAgICAgICAgICAgICAvLyAgIGxlZnQ6ICdsZWZ0JwogICAgICAgICAgICAgICAgLy8gfSwKICAgICAgICAgICAgICAgIHNlcmllczogW3sKICAgICAgICAgICAgICAgICAgbmFtZTogJ+iuv+mXruadpea6kCcsCiAgICAgICAgICAgICAgICAgIHR5cGU6ICdwaWUnLAogICAgICAgICAgICAgICAgICByYWRpdXM6ICc1MCUnLAogICAgICAgICAgICAgICAgICBkYXRhOiBfdGhpcy5waWVEYXRhLAogICAgICAgICAgICAgICAgICBlbXBoYXNpczogewogICAgICAgICAgICAgICAgICAgIGl0ZW1TdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgc2hhZG93Qmx1cjogMTAsCiAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dPZmZzZXRYOiAwLAogICAgICAgICAgICAgICAgICAgICAgc2hhZG93Q29sb3I6ICdyZ2JhKDAsIDAsIDAsIDAuNSknCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9XQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgX3RoaXMuY2hhcnRJbnN0YW5jZS5zZXRPcHRpb24ob3B0aW9uKTsKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdENoYXJ0KCk7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgaWYgKHRoaXMuY2hhcnRJbnN0YW5jZSkgewogICAgICB0aGlzLmNoYXJ0SW5zdGFuY2UuZGlzcG9zZSgpOwogICAgfQogIH0KfTs="},{"version":3,"names":["echarts","axios","queryBookInfos","getPieChartData","_getPieChartData","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","response","formattedData","wrap","_callee2$","_context2","prev","next","get","sent","console","log","data","map","item","name","bookname","value","book_num","abrupt","error","t0","stop","chartInstance","pieData","methods","initChart","_this","_callee","dataFromBackend","option","_callee$","_context","length","init","document","getElementById","tooltip","trigger","series","type","radius","emphasis","itemStyle","shadowBlur","shadowOffsetX","shadowColor","setOption","mounted","beforeDestroy","dispose"],"sources":["src/views/pie/index.vue"],"sourcesContent":["<template>\r\n  <div id=\"pie-chart\" style=\"width: 600px;height:400px;\"></div>\r\n</template>\r\n\r\n<script>\r\nimport * as echarts from 'echarts';\r\nimport axios from 'axios'; // 假设使用 Axios 进行HTTP请求\r\nimport {\r\n  // ... (其他导入保持不变)\r\n  queryBookInfos\r\n} from \"@/api/bookinfo\";\r\n\r\n// 注意：这里只保留一个异步版本的 getPieChartData 函数\r\nasync function getPieChartData() {\r\n  try {\r\n    const response = await axios.get('http://localhost:9111/BookManager/bookInfo/queryBookInfos');\r\n    console.log(response)\r\n    if (response &&  response.data) {\r\n      const formattedData = response.data.map(item => ({\r\n        name: item.bookname, // 假设后端的标题字段为title\r\n        value: item.book_num // 假设后端的数量字段为count\r\n      }));\r\n      return formattedData;\r\n      \r\n    } else {\r\n      console.error('获取数据失败');\r\n      return [];\r\n    }\r\n  } catch (error) {\r\n    console.error('请求数据时发生错误', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      chartInstance: null,\r\n      pieData: [\r\n        \r\n      ]\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    async initChart() {\r\n      const dataFromBackend = await getPieChartData();\r\n      console.log(dataFromBackend);\r\n      if (dataFromBackend && dataFromBackend.length > 0) {\r\n        this.pieData = dataFromBackend.map(item => ({ value: item.value, name: item.name }));\r\n      }\r\n      this.chartInstance = echarts.init(document.getElementById('pie-chart'));\r\n\r\n      const option = {\r\n        tooltip: {\r\n          trigger: 'item'\r\n        },\r\n        // legend: {\r\n        //   orient: 'vertical',\r\n        //   left: 'left'\r\n        // },\r\n        series: [{\r\n          name: '访问来源',\r\n          type: 'pie',\r\n          radius: '50%',\r\n          data: this.pieData,\r\n          emphasis: {\r\n            itemStyle: {\r\n              shadowBlur: 10,\r\n              shadowOffsetX: 0,\r\n              shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n            }\r\n          }\r\n        }]\r\n      };\r\n      this.chartInstance.setOption(option);\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.initChart();\r\n  },\r\n\r\n  beforeDestroy() {\r\n    if (this.chartInstance) {\r\n      this.chartInstance.dispose();\r\n    }\r\n  }\r\n};\r\n</script>"],"mappings":"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"}]}