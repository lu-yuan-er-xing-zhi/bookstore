{"remainingRequest":"D:\\BookManager\\BookManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\BookManager\\BookManagerVue\\src\\views\\storage\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\BookManager\\BookManagerVue\\src\\views\\storage\\index.vue","mtime":1719129672984},{"path":"D:\\BookManager\\BookManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713778494000},{"path":"D:\\BookManager\\BookManagerVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1713778492000},{"path":"D:\\BookManager\\BookManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713778494000},{"path":"D:\\BookManager\\BookManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1713778512000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7DQppbXBvcnQgcGVybWlzc2lvbiBmcm9tICJAL2RpcmVjdGl2ZS9wZXJtaXNzaW9uL2luZGV4LmpzIjsgLy8g5p2D6ZmQ5Yik5pat5oyH5LukDQppbXBvcnQgd2F2ZXMgZnJvbSAiQC9kaXJlY3RpdmUvd2F2ZXMiOyAvLyB3YXZlcyBkaXJlY3RpdmUNCg0KaW1wb3J0IHsNCiAgZ2V0Q291bnQsDQogIHF1ZXJ5U3RvcmFnZXNCeVBhZ2UsDQogIGFkZFN0b3JhZ2UsDQogIGRlbGV0ZUJvb2tJbmZvLA0KICBkZWxldGVCb29rSW5mb3MsDQogIHVwZGF0ZVN0b3JhZ2UsDQogIHF1ZXJ5U3RvcmFnZSwNCn0gZnJvbSAiQC9hcGkvc3RvcmFnZSI7DQppbXBvcnQgeyBxdWVyeUJvb2tUeXBlcyB9IGZyb20gIkAvYXBpL2Jvb2t0eXBlIjsNCmltcG9ydCB7IGJvcnJvd0Jvb2sgfSBmcm9tICJAL2FwaS9ib3Jyb3ciOw0KaW1wb3J0IHsgcXVlcnlVc2VycyB9IGZyb20gIkAvYXBpL3VzZXIiOw0KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiU3RvcmFnZSIsDQogIGRpcmVjdGl2ZXM6IHsgd2F2ZXMsIHBlcm1pc3Npb24gfSwNCiAgLy8g5Yib5bu65ZCODQogIGNyZWF0ZWQoKSB7DQogICAgICAvLyDku47mnI3liqHlmajojrflj5bmlbDmja7ooajmoLznrKzkuIDpobXnmoTkv6Hmga8NCiAgICAgIHF1ZXJ5U3RvcmFnZXNCeVBhZ2UodGhpcy5xdWVyeVBhcmFtKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZygi6aaW6aG15pWw5o2u6I635Y+W5oiQ5YqfIiwgcmVzKTsNCiAgICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlcy5kYXRhOw0KICAgICAgICAgIHRoaXMucmVjb3JkVG90YWwgPSByZXMuY291bnQ7DQogICAgICB9KTsNCiAgICAgIC8vIOS7juacjeWKoeWZqOiOt+WPluaJgOacieeahOWbvuS5puexu+Weiw0KICAgICAgcXVlcnlCb29rVHlwZXMoKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZygi5Zu+5Lmm57G75Z6L6I635Y+W5oiQ5YqfIiwgcmVzKTsNCiAgICAgICAgICB0aGlzLnR5cGVEYXRhID0gcmVzOw0KICAgICAgfSk7DQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgICBpZiAodGhpcy5yb2xlSXNBZG1pbiA9PT0gZmFsc2UpIHsNCiAgICAgICAgICB0aGlzLnF1ZXJ5UGFyYW0ubGltaXQgPSA1Ow0KICAgICAgICAgIHRoaXMuaGFuZGxlU2l6ZUNoYW5nZSh0aGlzLnF1ZXJ5UGFyYW0ubGltaXQpOw0KICAgICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgICAvLyDliIbpobXlpKflsI/mlLnlj5jnm5HlkKwNCiAgICAgIGhhbmRsZVNpemVDaGFuZ2UoY3VyU2l6ZSkgew0KICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMucXVlcnlQYXJhbTsNCiAgICAgICAgICBwYXJhbXMubGltaXQgPSBjdXJTaXplOw0KICAgICAgICAgIHF1ZXJ5U3RvcmFnZXNCeVBhZ2UocGFyYW1zKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgICAgY29uc29sZS5sb2coIuWIhumhteaVsOaNruiOt+WPluaIkOWKnyIsIHJlcyk7DQogICAgICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzLmRhdGE7DQogICAgICAgICAgICAgIHRoaXMucmVjb3JkVG90YWwgPSByZXMuY291bnQ7DQogICAgICAgICAgfSk7DQogICAgICB9LA0KDQogICAgICAvLyDngrnlh7vliIbpobXnm5HlkKzmlrnms5UNCiAgICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UoY3VyUGFnZSkgew0KICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMucXVlcnlQYXJhbTsNCiAgICAgICAgICBwYXJhbXMucGFnZSA9IGN1clBhZ2U7DQoNCiAgICAgICAgICBxdWVyeVN0b3JhZ2VzQnlQYWdlKHBhcmFtcykudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCLliIbpobXmlbDmja7ojrflj5bmiJDlip8iLCByZXMpOw0KICAgICAgICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlcy5kYXRhOw0KICAgICAgICAgICAgICB0aGlzLnJlY29yZFRvdGFsID0gcmVzLmNvdW50Ow0KICAgICAgICAgIH0pOw0KICAgICAgfSwNCg0KICAgICAgLy8g5pCc57Si5Zu+5LmmDQogICAgICBoYW5kbGVGaWx0ZXIoKSB7DQogICAgICAgICAgdGhpcy5xdWVyeVBhcmFtLnBhZ2UgPSAxOw0KICAgICAgICAgIHF1ZXJ5U3RvcmFnZXNCeVBhZ2UodGhpcy5xdWVyeVBhcmFtKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAwKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlcy5kYXRhOw0KICAgICAgICAgICAgICAgICAgdGhpcy5yZWNvcmRUb3RhbCA9IHJlcy5jb3VudDsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pOw0KICAgICAgfSwNCg0KICAgICAgLy8g5pi+56S65YWo6YOoDQogICAgICBoYW5kbGVTaG93QWxsKCkgew0KICAgICAgICAgIHRoaXMucXVlcnlQYXJhbS5wYWdlID0gMTsNCiAgICAgICAgICB0aGlzLnF1ZXJ5UGFyYW0ud2FyZWhvdXNlaWQgPSBudWxsOw0KICAgICAgICAgIHRoaXMucXVlcnlQYXJhbS5ib29raWQgPSBudWxsOw0KICAgICAgICAgIHRoaXMucXVlcnlQYXJhbS5ib29rbmFtZSA9IG51bGw7DQogICAgICAgICAgcXVlcnlTdG9yYWdlKHRoaXMucXVlcnlQYXJhbSkudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXMuZGF0YTsNCiAgICAgICAgICAgICAgICAgIHRoaXMucmVjb3JkVG90YWwgPSByZXMuY291bnQ7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICB9KTsNCiAgICAgIH0sDQoNCg0KICAgICAgLy8g54K55Ye75re75Yqg6K6w5b2VDQogICAgICBoYW5kbGVDcmVhdGUoKSB7DQogICAgICAgICAgLy8g5LuO5pyN5Yqh5Zmo6I635Y+W5omA5pyJ55qE5Zu+5Lmm57G75Z6LDQogICAgICAgICAgcXVlcnlTdG9yYWdlKCkudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCLlm77kuabnsbvlnovojrflj5bmiJDlip8iLCByZXMpOw0KICAgICAgICAgICAgICB0aGlzLnR5cGVEYXRhID0gcmVzOw0KICAgICAgICAgIH0pOw0KICAgICAgICAgIC8vIOihqOWNleaYr+a3u+WKoOeKtuaAgQ0KICAgICAgICAgIHRoaXMuZm9ybVR5cGUgPSAwOw0KICAgICAgICAgIC8vIOWwhuepuuaVsOaNrue9ruWFpWZvcm0NCiAgICAgICAgICB0aGlzLmZvcm0gPSB7DQogICAgICAgICAgICAgIHdhcmVob3VzZWlkOiBudWxsLA0KICAgICAgICAgICAgICBjYXBhY2l0eTogIiIsDQogICAgICAgICAgICAgIGJvb2tpZDogIiIsDQogICAgICAgICAgICAgIHdvcmtlcmlkOiAiMSIsDQogICAgICAgICAgICAgIGJvb2tuYW1lOiAiIiwNCiAgICAgICAgICAgICAgc2l0ZTogMCwNCiAgICAgICAgICAgICAgaW5wdXR0aW1lOiAiIiwNCiAgICAgICAgICB9Ow0KICAgICAgICAgIC8vIOaYvuekuuihqOWNleahhg0KICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlOw0KICAgICAgfSwNCg0KICAgICAgLy8g54K55Ye757yW6L6R6K6w5b2VDQogICAgICBoYW5kbGVVcGRhdGUocm93KSB7DQogICAgICAgICAgLy8g5LuO5pyN5Yqh5Zmo6I635Y+W5omA5pyJ55qE5Zu+5Lmm57G75Z6LDQogICAgICAgICAgcXVlcnlTdG9yYWdlKCkudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCLlm77kuabnsbvlnovojrflj5bmiJDlip8iLCByZXMpOw0KICAgICAgICAgICAgICB0aGlzLnR5cGVEYXRhID0gcmVzOw0KICAgICAgICAgIH0pOw0KICAgICAgICAgIC8vIOihqOWNleaYr+e8lui+keeKtuaAgQ0KICAgICAgICAgIHRoaXMuZm9ybVR5cGUgPSAxOw0KICAgICAgICAgIC8vIOWwhuihjOaVsOaNrue9ruWFpWZvcm0NCiAgICAgICAgICB0aGlzLmZvcm0gPSB7DQogICAgICAgICAgICAgIHdhcmVob3VzZWlkOiByb3cud2FyZWhvdXNlaWQsDQogICAgICAgICAgICAgIGNhcGFjaXR5OiByb3cuY2FwYWNpdHksDQogICAgICAgICAgICAgIGJvb2tpZDogcm93LmJvb2tpZCwNCiAgICAgICAgICAgICAgd29ya2VyaWQ6IHJvdy53b3JrZXJpZCwNCiAgICAgICAgICAgICAgYm9va25hbWU6IHJvdy5ib29rbmFtZSwNCiAgICAgICAgICAgICAgc2l0ZTogcm93LnNpdGUsDQogICAgICAgICAgICAgIGlucHV0dGltZTogcm93LmlucHV0dGltZSwNCiAgICAgICAgICB9Ow0KICAgICAgICAgIC8vIOaYvuekuuihqOWNleahhg0KICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlOw0KICAgICAgfSwNCg0KICAgICAgLy8g5re75Yqg5ZKM5pu05paw55qE5o+Q5Lqk6KGo5Y2VDQogICAgICBzdWJtaXRGb3JtKCkgew0KICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmZvcm0pDQogICAgICAgICAgLy8gaWYgKHRoaXMuZm9ybVR5cGUgPT09IDApIHsNCiAgICAgICAgICAvLyAgICAgLy8g5re75Yqg6K6w5b2VDQogICAgICAgICAgLy8gICAgIGFkZEJvb2tJbmZvKHRoaXMuZm9ybSkudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgLy8gICAgICAgICBpZiAocmVzID09PSAxKSB7DQogICAgICAgICAgLy8gICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmt7vliqDorrDlvZXmiJDlip8iKTsNCiAgICAgICAgICAvLyAgICAgICAgICAgICAvLyDot7PovazliLDmnKvlsL4NCiAgICAgICAgICAvLyAgICAgICAgICAgICBnZXRDb3VudCgpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIC8vICAgICAgICAgICAgICAgICB0aGlzLnJlY29yZFRvdGFsID0gcmVzOw0KICAgICAgICAgIC8vICAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5UGFyYW0ucGFnZSA9IDE7DQogICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ3VycmVudENoYW5nZSh0aGlzLnF1ZXJ5UGFyYW0ucGFnZSk7DQogICAgICAgICAgLy8gICAgICAgICAgICAgfSk7DQogICAgICAgICAgLy8gICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIC8vICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIua3u+WKoOiusOW9leWksei0pSIpOw0KICAgICAgICAgIC8vICAgICAgICAgfQ0KICAgICAgICAgIC8vICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlOyAvLyDlhbPpl63lr7nor53moYYNCiAgICAgICAgICAvLyAgICAgfSk7DQogICAgICAgICAgLy8gfSBlbHNlIGlmICh0aGlzLmZvcm1UeXBlID09PSAxKSB7DQogICAgICAgICAgLy8gICAgIC8v5pu05paw6K6w5b2VDQogICAgICAgICAgLy8gICAgIHVwZGF0ZVN0b3JhZ2UodGhpcy5mb3JtKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAvLyAgICAgICAgIGlmIChyZXMgPT09IDEgfHwgcmVzID09PSAwKSB7DQogICAgICAgICAgLy8gICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmm7TmlrDorrDlvZXmiJDlip8iKTsNCiAgICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLmhhbmRsZUN1cnJlbnRDaGFuZ2UodGhpcy5xdWVyeVBhcmFtLnBhZ2UpOw0KICAgICAgICAgIC8vICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLmm7TmlrDorrDlvZXlpLHotKUiKTsNCiAgICAgICAgICAvLyAgICAgICAgIH0NCiAgICAgICAgICAvLyAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsgLy8g5YWz6Zet5a+56K+d5qGGDQogICAgICAgICAgLy8gICAgIH0pOw0KICAgICAgICAgIC8vIH0NCiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSAgYXhpb3MucG9zdCgnaHR0cDovL2xvY2FsaG9zdDo5MTExL0Jvb2tNYW5hZ2VyL3N0b3JhZ2UvdXBkYXRlU3RvcmFnZScsIHsNCiAgICAgICAgICAgIGNhcGFjaXR5IDogdGhpcy5mb3JtLmNhcGFjaXR5LA0KICAgICAgICAgICAgYm9va2lkOnRoaXMuZm9ybS5ib29raWQNCiAgICAgICAgfSk7DQogICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsgLy8g5YWz6Zet5a+56K+d5qGGDQogICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpDQogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKQ0KICAgICAgfSwNCg0KICAgIC8vICAgLy8g5Yig6Zmk6K6w5b2VDQogICAgLy8gICBoYW5kbGVEZWxldGUocm93LCBpbmRleCkgew0KICAgIC8vICAgICAgIHRoaXMuJGNvbmZpcm0oIuehruWumuimgeWIoOmZpOivpeadoeiusOW9leWQlz8iLCAi5o+Q56S6Iiwgew0KICAgIC8vICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruWumiIsDQogICAgLy8gICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiLA0KICAgIC8vICAgICAgICAgICB0eXBlOiAid2FybmluZyIsDQogICAgLy8gICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgLy8gICAgICAgICAgIGRlbGV0ZUJvb2tJbmZvKHJvdykudGhlbigocmVzKSA9PiB7DQogICAgLy8gICAgICAgICAgICAgICBpZiAocmVzID09PSAxKSB7DQogICAgLy8gICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLliKDpmaTorrDlvZXmiJDlip8iKTsNCiAgICAvLyAgICAgICAgICAgICAgICAgICB0aGlzLnRhYmxlRGF0YS5zcGxpY2UoaW5kZXgsIDEpOw0KICAgIC8vICAgICAgICAgICAgICAgICAgIC8vIOWmguaenOWIoOWujOS6hu+8jOiOt+WPluS4iuS4gOmhtQ0KICAgIC8vICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRhYmxlRGF0YS5sZW5ndGggPT09IDApIHsNCiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyeVBhcmFtLnBhZ2UgPSB0aGlzLnF1ZXJ5UGFyYW0ucGFnZSAtIDE7DQogICAgLy8gICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ3VycmVudENoYW5nZSh0aGlzLnF1ZXJ5UGFyYW0ucGFnZSk7DQogICAgLy8gICAgICAgICAgICAgICAgICAgfQ0KICAgIC8vICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMgPT09IC0xKSB7DQogICAgLy8gICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigNCiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgIuivpeWbvuS5puWtmOWcqOS4juivu+iAheeahOWAn+mYheS/oeaBr++8jOivt+WwneivleWFiOWIoOmZpOaJgOacieeahOacrOWbvuS5puWAn+mYheS/oeaBr+WGjemHjeivlSINCiAgICAvLyAgICAgICAgICAgICAgICAgICApOw0KICAgIC8vICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAvLyAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLliKDpmaTorrDlvZXlpLHotKUiKTsNCiAgICAvLyAgICAgICAgICAgICAgIH0NCiAgICAvLyAgICAgICAgICAgfSk7DQogICAgLy8gICAgICAgfSk7DQogICAgLy8gICB9LA0KDQogICAgLy8gICAvLyDliKDpmaTkuIDkupsNCiAgICAvLyAgIGhhbmRsZURlbGV0ZVNvbWUoKSB7DQogICAgLy8gICAgICAgdGhpcy4kY29uZmlybSgi56Gu5a6a6KaB5Yig6Zmk6L+Z5Lqb6K6w5b2V5ZCXPyIsICLmj5DnpLoiLCB7DQogICAgLy8gICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwNCiAgICAvLyAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsDQogICAgLy8gICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwNCiAgICAvLyAgICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAvLyAgICAgICAgICAgLy8g6I635Y+W6YCJ5Lit55qE5a+56LGh5pWw57uEDQogICAgLy8gICAgICAgICAgIGNvbnN0IGl0ZW1zID0gdGhpcy4kcmVmcy5tdWx0aXBsZVRhYmxlLnNlbGVjdGlvbjsNCiAgICAvLyAgICAgICAgICAgZGVsZXRlQm9va0luZm9zKGl0ZW1zKS50aGVuKChyZXMpID0+IHsNCiAgICAvLyAgICAgICAgICAgICAgIGlmIChyZXMgPiAwKSB7DQogICAgLy8gICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLliKDpmaQiICsgcmVzICsgIuadoeiusOW9leaIkOWKnyIpOw0KICAgIC8vICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRhYmxlRGF0YS5sZW5ndGggPT09IHJlcykgew0KICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAvL+WmguaenOacrOmhteWGheWuueWFqOmDqOWIoOWFieS6hg0KICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAvL+W9k+WJjemhteS4uuS4iuS4gOmhtQ0KICAgIC8vICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5xdWVyeVBhcmFtLnBhZ2UgIT09IDApIHsNCiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVlcnlQYXJhbS5wYWdlID0gdGhpcy5xdWVyeVBhcmFtLnBhZ2UgLSAxOw0KICAgIC8vICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgLy8gICAgICAgICAgICAgICAgICAgfQ0KICAgIC8vICAgICAgICAgICAgICAgICAgIC8vIOmHjei9veW9k+WJjemhtQ0KICAgIC8vICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ3VycmVudENoYW5nZSh0aGlzLnF1ZXJ5UGFyYW0ucGFnZSk7DQogICAgLy8gICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgIC8vICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuWIoOmZpOiusOW9leWksei0pSIpOw0KICAgIC8vICAgICAgICAgICAgICAgfQ0KICAgIC8vICAgICAgICAgICB9KTsNCiAgICAvLyAgICAgICB9KTsNCiAgICAvLyAgIH0sDQogIH0sDQogIGRhdGEoKSB7DQogICAgICByZXR1cm4gew0KICAgICAgICAgIC8vIOihqOagvOaVsOaNrg0KICAgICAgICAgIHRhYmxlRGF0YTogW10sDQogICAgICAgICAgLy8g6K6w5b2V5oC75pWwDQogICAgICAgICAgcmVjb3JkVG90YWw6IDAsDQogICAgICAgICAgLy8g5Zu+5Lmm57G75Z6L5pWw5o2uDQogICAgICAgICAgdHlwZURhdGE6IFtdLA0KICAgICAgICAgIC8vIOeUqOaIt+aVsOaNrg0KICAgICAgICAgIHVzZXJEYXRhOiBbXSwNCiAgICAgICAgICAvLyDmn6Xor6Llj4LmlbANCiAgICAgICAgICBxdWVyeVBhcmFtOiB7DQogICAgICAgICAgICAgIHBhZ2U6IDEsDQogICAgICAgICAgICAgIGxpbWl0OiAxMCwNCiAgICAgICAgICAgICAgYm9va25hbWU6IG51bGwsDQogICAgICAgICAgICAgIGJvb2thdXRob3I6IG51bGwsDQogICAgICAgICAgICAgIGJvb2t0eXBlaWQ6IG51bGwsDQogICAgICAgICAgfSwNCiAgICAgICAgICAvLyDlr7nor53moYbooajljZXmmL7npLoNCiAgICAgICAgICBkaWFsb2dGb3JtVmlzaWJsZTogZmFsc2UsDQogICAgICAgICAgZGlhbG9nRm9ybVZpc2libGUyOiBmYWxzZSwNCiAgICAgICAgICAvLyDooajljZXnsbvlnovvvIjmt7vliqDmlbDmja46MCzkv67mlLnmlbDmja46Me+8iQ0KICAgICAgICAgIGZvcm1UeXBlOiAwLA0KICAgICAgICAgIC8vIOihqOWNleaVsOaNrg0KICAgICAgICAgIGZvcm06IHsNCiAgICAgICAgICAgICAgd2FyZWhvdXNlaWQ6IG51bGwsDQogICAgICAgICAgICAgIGNhcGFjaXR5OiAiIiwNCiAgICAgICAgICAgICAgYm9va2lkOiAwLA0KICAgICAgICAgICAgICB3b3JrZXJpZDogMSwNCiAgICAgICAgICAgICAgYm9va25hbWU6ICIiLA0KICAgICAgICAgICAgICBzaXRlOiAwLA0KICAgICAgICAgICAgICBpbnB1dHRpbWU6ICIiLA0KICAgICAgICAgIH0sDQogICAgICAgICAgZm9ybTI6IHsNCiAgICAgICAgICAgICAgdXNlcmlkOiAxLA0KICAgICAgICAgICAgICBib29raWQ6IDEsDQogICAgICAgICAgfSwNCiAgICAgICAgICBydWxlczogew0KICAgICAgICAgICAgICBib29rbmFtZTogWw0KICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLor7fovpPlhaXlm77kuablkI3np7AiLA0KICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwNCiAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgIF0sDQogICAgICAgICAgICAgIGJvb2thdXRob3I6IFsNCiAgICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaXkvZzogIUiLCB0cmlnZ2VyOiAiYmx1ciIgfSwNCiAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICAgYm9va3ByaWNlOiBbDQogICAgICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl5Lu35qC8IiwgdHJpZ2dlcjogImJsdXIiIH0sDQogICAgICAgICAgICAgIF0sDQogICAgICAgICAgICAgIGJvb2t0eXBlaWQ6IFsNCiAgICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fpgInmi6nnsbvlnosiLCB0cmlnZ2VyOiAiYmx1ciIgfSwNCiAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICAgYm9va2Rlc2M6IFsNCiAgICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaXmj4/ov7AiLCB0cmlnZ2VyOiAiYmx1ciIgfSwNCiAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICAgaXNib3Jyb3dlZDogWw0KICAgICAgICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+mAieaLqeeKtuaAgSIsIHRyaWdnZXI6ICJibHVyIiB9LA0KICAgICAgICAgICAgICBdLA0KICAgICAgICAgIH0sDQogICAgICB9Ow0KICB9LA0KICBjb21wdXRlZDogew0KICAgICAgLy8g6I635b6XdXNlcuS/oeaBrw0KICAgICAgLi4ubWFwR2V0dGVycyhbImlkIiwgIm5hbWUiLCAicm9sZXMiXSksDQogICAgICAvLyDpgJrov4fooajljZXnsbvlnovorqHnrpfooajljZXmoIfpopgNCiAgICAgIGZvcm1UaXRsZSgpIHsNCiAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtVHlwZSA9PT0gMCA/ICLmt7vliqDorrDlvZUiIDogIuS/ruaUueiusOW9lSI7DQogICAgICB9LA0KICAgICAgcm9sZUlzQWRtaW4oKSB7DQogICAgICAgICAgaWYgKHRoaXMucm9sZXNbMF0gPT09ICJhZG1pbiIpIHJldHVybiB0cnVlOw0KICAgICAgICAgIGVsc2UgaWYodGhpcy5yb2xlc1swXSA9PT0gIndvcmtlciIpIHJldHVybiB0cnVlOw0KICAgICAgICAgIGVsc2UgcmV0dXJuIGZhbHNlOw0KICAgICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsOA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/storage","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n      <!-- 顶部功能 -->\r\n      <div class=\"filter-container\" style=\"margin-bottom: 15px\">\r\n          <!-- 书名输入 -->\r\n          <el-input\r\n              v-model=\"queryParam.bookname\"\r\n              placeholder=\"书名\"\r\n              style=\"width: 200px\"\r\n              class=\"filter-item\"\r\n              @keyup.enter.native=\"handleFilter\"\r\n          />\r\n          <!-- 作者输入 -->\r\n          <el-input\r\n              v-model=\"queryParam.bookauthor\"\r\n              placeholder=\"作者\"\r\n              style=\"width: 200px\"\r\n              class=\"filter-item\"\r\n              @keyup.enter.native=\"handleFilter\"\r\n          />\r\n          <!-- 类型选择 -->\r\n          <el-select\r\n              v-model=\"queryParam.booktypeid\"\r\n              filterable\r\n              placeholder=\"类型\"\r\n              clearable\r\n              class=\"filter-item\"\r\n              style=\"width: 200px\"\r\n          >\r\n              <el-option\r\n                  v-for=\"item in typeData\"\r\n                  :key=\"item.booktypeid\"\r\n                  :label=\"item.booktypename\"\r\n                  :value=\"item.booktypeid\"\r\n              />\r\n          </el-select>\r\n          <!-- 一些按钮 -->\r\n          <br />\r\n          <br />\r\n          <el-button\r\n              v-waves\r\n              style=\"font-size: 18px\"\r\n              class=\"filter-item\"\r\n              type=\"primary\"\r\n              @click=\"handleFilter\"\r\n          >\r\n              搜索\r\n          </el-button>\r\n          <el-button\r\n              v-waves\r\n              style=\"font-size: 18px\"\r\n              class=\"filter-item\"\r\n              type=\"primary\"\r\n              @click=\"handleFilter\"\r\n          >\r\n\r\n              显示全部\r\n          </el-button>\r\n\r\n\r\n      </div>\r\n\r\n      <!--弹出框-->\r\n      <el-dialog\r\n          :title=\"formTitle\"\r\n          :visible.sync=\"dialogFormVisible\"\r\n          width=\"40%\"\r\n      >\r\n          <el-row>\r\n              <el-col :span=\"16\">\r\n                  <!--普通表单-->\r\n                  <el-form\r\n                      :model=\"form\"\r\n                      :rules=\"rules\"\r\n                      ref=\"ruleForm\"\r\n                      label-width=\"80px\">\r\n\r\n                      <el-form-item label=\"库存量\" prop=\"capacity\">\r\n                          <el-input v-model=\"form.capacity\"></el-input>\r\n                      </el-form-item>\r\n\r\n\r\n                  </el-form>\r\n              </el-col>\r\n\r\n\r\n          </el-row>\r\n\r\n          <div slot=\"footer\" class=\"dialog-footer\">\r\n              <el-button\r\n                  @click=\"dialogFormVisible = false\"\r\n                  style=\"font-size: 18px\">\r\n              取 消\r\n              </el-button>\r\n              <el-button\r\n                  type=\"primary\"\r\n                  @click=\"submitForm\"\r\n                  style=\"font-size: 18px\">\r\n                  确 定11\r\n              </el-button>\r\n          </div>\r\n      </el-dialog>\r\n\r\n      <!--弹出框2-->\r\n      <el-dialog\r\n          title=\"选择用户\"\r\n          :visible.sync=\"dialogFormVisible2\"\r\n          width=\"400px\"\r\n      >\r\n          <el-form :model=\"form2\">\r\n              <el-form-item label=\"用户名\" prop=\"userid\" label-width=\"80px\">\r\n                  <el-select\r\n                      v-model=\"form2.booktypeid\"\r\n                      placeholder=\"请选择用户\"\r\n                  >\r\n                      <el-option\r\n                          v-for=\"item in userData\"\r\n                          :key=\"item.userid\"\r\n                          :label=\"item.username\"\r\n                          :value=\"item.userid\"\r\n                      >\r\n                      </el-option>\r\n                  </el-select>\r\n              </el-form-item>\r\n          </el-form>\r\n          <div slot=\"footer\" class=\"dialog-footer\">\r\n              <el-button\r\n                  @click=\"dialogFormVisible2 = false\"\r\n                  style=\"font-size: 18px\"\r\n              >\r\n\r\n                  取 消</el-button\r\n              >\r\n              <el-button\r\n                  type=\"primary\"\r\n                  @click=\"submitForm\"\r\n                  style=\"font-size: 18px\">\r\n                  确 定</el-button>\r\n          </div>\r\n      </el-dialog>\r\n\r\n      <!--数据表格-->\r\n      <el-table\r\n          ref=\"multipleTable\"\r\n          :data=\"tableData\"\r\n          border\r\n          style=\"width: 100%\"\r\n      >\r\n          <el-table-column fixed type=\"selection\" width=\"55\">\r\n          </el-table-column>\r\n          <el-table-column fixed prop=\"warehouseid\" label=\"仓库号\" width=\"100\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"bookid\" label=\"图书序号\" width=\"120\" sortable>\r\n          </el-table-column>\r\n\r\n\r\n          <el-table-column\r\n              v-if=\"roleIsAdmin === false\"\r\n              label=\"图书封面\"\r\n              width=\"155\"\r\n          >\r\n              <template slot-scope=\"scope\">\r\n                  <el-image\r\n                      :src=\"$store.state.settings.baseApi + scope.row.bookimg\"\r\n                      style=\"width: 130px; height: 180px\"\r\n                  ></el-image>\r\n              </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"bookname\"\r\n              label=\"图书名称\"\r\n              width=\"150\"\r\n              show-overflow-tooltip\r\n          >\r\n          </el-table-column>\r\n\r\n\r\n          <el-table-column\r\n              prop=\"capacity\"\r\n              label=\"库存量\"\r\n              width=\"100\"\r\n              show-overflow-tooltip\r\n          >\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"inputtime\"\r\n              label=\"入库时间\"\r\n              min-width=\"300\"\r\n              show-overflow-tooltip>\r\n\r\n          </el-table-column>\r\n          <el-table-column label=\"库存地点\" width=\"100\" prop=\"site\">\r\n\r\n          </el-table-column>\r\n          <el-table-column\r\n              fixed=\"right\"\r\n              label=\"操作\"\r\n              width=\"130\"\r\n          >\r\n              <template slot-scope=\"scope\">\r\n                  <el-button\r\n                      v-permission=\"['admin','worker']\"\r\n                      @click=\"handleUpdate(scope.row)\"\r\n                      type=\"primary\"\r\n                      style=\"font-size: 18px\">\r\n                      编辑</el-button>\r\n\r\n\r\n\r\n              </template>\r\n          </el-table-column>\r\n      </el-table>\r\n\r\n      <!--分页条-->\r\n      <el-pagination\r\n          background\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page.sync=\"queryParam.page\"\r\n          :page-sizes=\"[5, 10, 20, 50]\"\r\n          :page-size=\"queryParam.limit\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"recordTotal\"\r\n          style=\"margin-top: 15px\"\r\n      >\r\n      </el-pagination>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nimport permission from \"@/directive/permission/index.js\"; // 权限判断指令\r\nimport waves from \"@/directive/waves\"; // waves directive\r\n\r\nimport {\r\n  getCount,\r\n  queryStoragesByPage,\r\n  addStorage,\r\n  deleteBookInfo,\r\n  deleteBookInfos,\r\n  updateStorage,\r\n  queryStorage,\r\n} from \"@/api/storage\";\r\nimport { queryBookTypes } from \"@/api/booktype\";\r\nimport { borrowBook } from \"@/api/borrow\";\r\nimport { queryUsers } from \"@/api/user\";\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  name: \"Storage\",\r\n  directives: { waves, permission },\r\n  // 创建后\r\n  created() {\r\n      // 从服务器获取数据表格第一页的信息\r\n      queryStoragesByPage(this.queryParam).then((res) => {\r\n          console.log(\"首页数据获取成功\", res);\r\n          this.tableData = res.data;\r\n          this.recordTotal = res.count;\r\n      });\r\n      // 从服务器获取所有的图书类型\r\n      queryBookTypes().then((res) => {\r\n          console.log(\"图书类型获取成功\", res);\r\n          this.typeData = res;\r\n      });\r\n  },\r\n  mounted() {\r\n      if (this.roleIsAdmin === false) {\r\n          this.queryParam.limit = 5;\r\n          this.handleSizeChange(this.queryParam.limit);\r\n      }\r\n  },\r\n  methods: {\r\n      // 分页大小改变监听\r\n      handleSizeChange(curSize) {\r\n          const params = this.queryParam;\r\n          params.limit = curSize;\r\n          queryStoragesByPage(params).then((res) => {\r\n              console.log(\"分页数据获取成功\", res);\r\n              this.tableData = res.data;\r\n              this.recordTotal = res.count;\r\n          });\r\n      },\r\n\r\n      // 点击分页监听方法\r\n      handleCurrentChange(curPage) {\r\n          const params = this.queryParam;\r\n          params.page = curPage;\r\n\r\n          queryStoragesByPage(params).then((res) => {\r\n              console.log(\"分页数据获取成功\", res);\r\n              this.tableData = res.data;\r\n              this.recordTotal = res.count;\r\n          });\r\n      },\r\n\r\n      // 搜索图书\r\n      handleFilter() {\r\n          this.queryParam.page = 1;\r\n          queryStoragesByPage(this.queryParam).then((res) => {\r\n              if (res.code === 0) {\r\n                  this.tableData = res.data;\r\n                  this.recordTotal = res.count;\r\n              }\r\n          });\r\n      },\r\n\r\n      // 显示全部\r\n      handleShowAll() {\r\n          this.queryParam.page = 1;\r\n          this.queryParam.warehouseid = null;\r\n          this.queryParam.bookid = null;\r\n          this.queryParam.bookname = null;\r\n          queryStorage(this.queryParam).then((res) => {\r\n              if (res.code === 0) {\r\n                  this.tableData = res.data;\r\n                  this.recordTotal = res.count;\r\n              }\r\n          });\r\n      },\r\n\r\n\r\n      // 点击添加记录\r\n      handleCreate() {\r\n          // 从服务器获取所有的图书类型\r\n          queryStorage().then((res) => {\r\n              console.log(\"图书类型获取成功\", res);\r\n              this.typeData = res;\r\n          });\r\n          // 表单是添加状态\r\n          this.formType = 0;\r\n          // 将空数据置入form\r\n          this.form = {\r\n              warehouseid: null,\r\n              capacity: \"\",\r\n              bookid: \"\",\r\n              workerid: \"1\",\r\n              bookname: \"\",\r\n              site: 0,\r\n              inputtime: \"\",\r\n          };\r\n          // 显示表单框\r\n          this.dialogFormVisible = true;\r\n      },\r\n\r\n      // 点击编辑记录\r\n      handleUpdate(row) {\r\n          // 从服务器获取所有的图书类型\r\n          queryStorage().then((res) => {\r\n              console.log(\"图书类型获取成功\", res);\r\n              this.typeData = res;\r\n          });\r\n          // 表单是编辑状态\r\n          this.formType = 1;\r\n          // 将行数据置入form\r\n          this.form = {\r\n              warehouseid: row.warehouseid,\r\n              capacity: row.capacity,\r\n              bookid: row.bookid,\r\n              workerid: row.workerid,\r\n              bookname: row.bookname,\r\n              site: row.site,\r\n              inputtime: row.inputtime,\r\n          };\r\n          // 显示表单框\r\n          this.dialogFormVisible = true;\r\n      },\r\n\r\n      // 添加和更新的提交表单\r\n      submitForm() {\r\n        console.log(this.form)\r\n          // if (this.formType === 0) {\r\n          //     // 添加记录\r\n          //     addBookInfo(this.form).then((res) => {\r\n          //         if (res === 1) {\r\n          //             this.$message.success(\"添加记录成功\");\r\n          //             // 跳转到末尾\r\n          //             getCount().then((res) => {\r\n          //                 this.recordTotal = res;\r\n          //                 this.queryParam.page = 1;\r\n          //                 this.handleCurrentChange(this.queryParam.page);\r\n          //             });\r\n          //         } else {\r\n          //             this.$message.error(\"添加记录失败\");\r\n          //         }\r\n          //         this.dialogFormVisible = false; // 关闭对话框\r\n          //     });\r\n          // } else if (this.formType === 1) {\r\n          //     //更新记录\r\n          //     updateStorage(this.form).then((res) => {\r\n          //         if (res === 1 || res === 0) {\r\n          //             this.$message.success(\"更新记录成功\");\r\n          //             this.handleCurrentChange(this.queryParam.page);\r\n          //         } else {\r\n          //             this.$message.error(\"更新记录失败\");\r\n          //         }\r\n          //         this.dialogFormVisible = false; // 关闭对话框\r\n          //     });\r\n          // }\r\n        const response =  axios.post('http://localhost:9111/BookManager/storage/updateStorage', {\r\n            capacity : this.form.capacity,\r\n            bookid:this.form.bookid\r\n        });\r\n        this.dialogFormVisible = false; // 关闭对话框\r\n        location.reload()\r\n        console.log(response)\r\n      },\r\n\r\n    //   // 删除记录\r\n    //   handleDelete(row, index) {\r\n    //       this.$confirm(\"确定要删除该条记录吗?\", \"提示\", {\r\n    //           confirmButtonText: \"确定\",\r\n    //           cancelButtonText: \"取消\",\r\n    //           type: \"warning\",\r\n    //       }).then(() => {\r\n    //           deleteBookInfo(row).then((res) => {\r\n    //               if (res === 1) {\r\n    //                   this.$message.success(\"删除记录成功\");\r\n    //                   this.tableData.splice(index, 1);\r\n    //                   // 如果删完了，获取上一页\r\n    //                   if (this.tableData.length === 0) {\r\n    //                       this.queryParam.page = this.queryParam.page - 1;\r\n    //                       this.handleCurrentChange(this.queryParam.page);\r\n    //                   }\r\n    //               } else if (res === -1) {\r\n    //                   this.$message.error(\r\n    //                       \"该图书存在与读者的借阅信息，请尝试先删除所有的本图书借阅信息再重试\"\r\n    //                   );\r\n    //               } else {\r\n    //                   this.$message.error(\"删除记录失败\");\r\n    //               }\r\n    //           });\r\n    //       });\r\n    //   },\r\n\r\n    //   // 删除一些\r\n    //   handleDeleteSome() {\r\n    //       this.$confirm(\"确定要删除这些记录吗?\", \"提示\", {\r\n    //           confirmButtonText: \"确定\",\r\n    //           cancelButtonText: \"取消\",\r\n    //           type: \"warning\",\r\n    //       }).then(() => {\r\n    //           // 获取选中的对象数组\r\n    //           const items = this.$refs.multipleTable.selection;\r\n    //           deleteBookInfos(items).then((res) => {\r\n    //               if (res > 0) {\r\n    //                   this.$message.success(\"删除\" + res + \"条记录成功\");\r\n    //                   if (this.tableData.length === res) {\r\n    //                       //如果本页内容全部删光了\r\n    //                       //当前页为上一页\r\n    //                       if (this.queryParam.page !== 0) {\r\n    //                           this.queryParam.page = this.queryParam.page - 1;\r\n    //                       }\r\n    //                   }\r\n    //                   // 重载当前页\r\n    //                   this.handleCurrentChange(this.queryParam.page);\r\n    //               } else {\r\n    //                   this.$message.error(\"删除记录失败\");\r\n    //               }\r\n    //           });\r\n    //       });\r\n    //   },\r\n  },\r\n  data() {\r\n      return {\r\n          // 表格数据\r\n          tableData: [],\r\n          // 记录总数\r\n          recordTotal: 0,\r\n          // 图书类型数据\r\n          typeData: [],\r\n          // 用户数据\r\n          userData: [],\r\n          // 查询参数\r\n          queryParam: {\r\n              page: 1,\r\n              limit: 10,\r\n              bookname: null,\r\n              bookauthor: null,\r\n              booktypeid: null,\r\n          },\r\n          // 对话框表单显示\r\n          dialogFormVisible: false,\r\n          dialogFormVisible2: false,\r\n          // 表单类型（添加数据:0,修改数据:1）\r\n          formType: 0,\r\n          // 表单数据\r\n          form: {\r\n              warehouseid: null,\r\n              capacity: \"\",\r\n              bookid: 0,\r\n              workerid: 1,\r\n              bookname: \"\",\r\n              site: 0,\r\n              inputtime: \"\",\r\n          },\r\n          form2: {\r\n              userid: 1,\r\n              bookid: 1,\r\n          },\r\n          rules: {\r\n              bookname: [\r\n                  {\r\n                      required: true,\r\n                      message: \"请输入图书名称\",\r\n                      trigger: \"blur\",\r\n                  },\r\n              ],\r\n              bookauthor: [\r\n                  { required: true, message: \"请输入作者\", trigger: \"blur\" },\r\n              ],\r\n              bookprice: [\r\n                  { required: true, message: \"请输入价格\", trigger: \"blur\" },\r\n              ],\r\n              booktypeid: [\r\n                  { required: true, message: \"请选择类型\", trigger: \"blur\" },\r\n              ],\r\n              bookdesc: [\r\n                  { required: true, message: \"请输入描述\", trigger: \"blur\" },\r\n              ],\r\n              isborrowed: [\r\n                  { required: true, message: \"请选择状态\", trigger: \"blur\" },\r\n              ],\r\n          },\r\n      };\r\n  },\r\n  computed: {\r\n      // 获得user信息\r\n      ...mapGetters([\"id\", \"name\", \"roles\"]),\r\n      // 通过表单类型计算表单标题\r\n      formTitle() {\r\n          return this.formType === 0 ? \"添加记录\" : \"修改记录\";\r\n      },\r\n      roleIsAdmin() {\r\n          if (this.roles[0] === \"admin\") return true;\r\n          else if(this.roles[0] === \"worker\") return true;\r\n          else return false;\r\n      },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409eff;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  line-height: 178px;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 150px;\r\n  height: 200px;\r\n  display: block;\r\n}\r\n</style>\r\n"]}]}