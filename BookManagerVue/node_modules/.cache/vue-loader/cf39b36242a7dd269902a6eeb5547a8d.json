{"remainingRequest":"D:\\BookManager\\BookManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\BookManager\\BookManagerVue\\src\\views\\borrow\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\BookManager\\BookManagerVue\\src\\views\\borrow\\index.vue","mtime":1719199055951},{"path":"D:\\BookManager\\BookManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713778494000},{"path":"D:\\BookManager\\BookManagerVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1713778492000},{"path":"D:\\BookManager\\BookManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713778494000},{"path":"D:\\BookManager\\BookManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1713778512000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7DQppbXBvcnQgcGVybWlzc2lvbiBmcm9tICJAL2RpcmVjdGl2ZS9wZXJtaXNzaW9uL2luZGV4LmpzIjsgLy8g5p2D6ZmQ5Yik5pat5oyH5LukDQppbXBvcnQgd2F2ZXMgZnJvbSAiQC9kaXJlY3RpdmUvd2F2ZXMiOyAvLyB3YXZlcyBkaXJlY3RpdmUNCmltcG9ydCB7DQogIGdldENvdW50LA0KICBxdWVyeUJvcnJvd3MsDQogIHF1ZXJ5Qm9ycm93c0J5UGFnZSwNCiAgYWRkQm9ycm93LA0KICBkZWxldGVCb3Jyb3csDQogIGRlbGV0ZUJvcnJvd3MsDQogIHVwZGF0ZUJvcnJvdywNCiAgcmV0dXJuQm9vaywNCn0gZnJvbSAiQC9hcGkvYm9ycm93IjsNCg0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJCb29raW5mbyIsDQogIGRpcmVjdGl2ZXM6IHsgd2F2ZXMsIHBlcm1pc3Npb24gfSwNCiAgLy8g5Yib5bu65ZCODQogIGNyZWF0ZWQoKSB7DQogICAgLy8g5LuO5pyN5Yqh5Zmo6I635Y+W5pWw5o2u6KGo5qC856ys5LiA6aG155qE5L+h5oGvDQogICAgcXVlcnlCb3Jyb3dzQnlQYWdlKHRoaXMucXVlcnlQYXJhbSkudGhlbigocmVzKSA9PiB7DQogICAgICBjb25zb2xlLmxvZygi6aaW6aG15pWw5o2u6I635Y+W5oiQ5YqfIiwgcmVzKTsNCiAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzLmRhdGE7DQogICAgICB0aGlzLnJlY29yZFRvdGFsID0gcmVzLmNvdW50Ow0KICAgIH0pOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy8g5YiG6aG15aSn5bCP5pS55Y+Y55uR5ZCsDQogICAgaGFuZGxlU2l6ZUNoYW5nZShjdXJTaXplKSB7DQogICAgICBjb25zdCBwYXJhbXMgPSB0aGlzLnF1ZXJ5UGFyYW07DQogICAgICBwYXJhbXMubGltaXQgPSBjdXJTaXplOw0KICAgICAgcXVlcnlCb3Jyb3dzQnlQYWdlKHBhcmFtcykudGhlbigocmVzKSA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKCLliIbpobXmlbDmja7ojrflj5bmiJDlip8iLCByZXMpOw0KICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlcy5kYXRhOw0KICAgICAgICB0aGlzLnJlY29yZFRvdGFsID0gcmVzLmNvdW50Ow0KDQogICAgICB9KTsNCiAgICB9LA0KDQogICAgLy8g54K55Ye75YiG6aG155uR5ZCs5pa55rOVDQogICAgaGFuZGxlQ3VycmVudENoYW5nZShjdXJQYWdlKSB7DQogICAgICBjb25zdCBwYXJhbXMgPSB0aGlzLnF1ZXJ5UGFyYW07DQogICAgICBwYXJhbXMucGFnZSA9IGN1clBhZ2U7DQogICAgICBxdWVyeUJvcnJvd3NCeVBhZ2UocGFyYW1zKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgY29uc29sZS5sb2coIuWIhumhteaVsOaNruiOt+WPluaIkOWKnyIsIHJlcyk7DQogICAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzLmRhdGE7DQogICAgICAgIHRoaXMucmVjb3JkVG90YWwgPSByZXMuY291bnQ7DQoNCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgICAvLyDmkJzntKINCiAgICBoYW5kbGVGaWx0ZXIoKSB7DQogICAgICB0aGlzLnF1ZXJ5UGFyYW0ucGFnZSA9IDE7DQogICAgICBxdWVyeUJvcnJvd3NCeVBhZ2UodGhpcy5xdWVyeVBhcmFtKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAwKSB7DQogICAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXMuZGF0YTsNCiAgICAgICAgICB0aGlzLnJlY29yZFRvdGFsID0gcmVzLmNvdW50Ow0KICAgICAgICB9DQoNCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgICAvLyDmmL7npLrlhajpg6gNCiAgICBoYW5kbGVTaG93QWxsKCkgew0KICAgICAgdGhpcy5xdWVyeVBhcmFtLnBhZ2UgPSAxOw0KICAgICAgdGhpcy5xdWVyeVBhcmFtLnVzZXJuYW1lID0gbnVsbDsNCiAgICAgIHRoaXMucXVlcnlQYXJhbS5ib29rbmFtZSA9IG51bGw7DQogICAgICBxdWVyeUJvcnJvd3NCeVBhZ2UodGhpcy5xdWVyeVBhcmFtKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAwKSB7DQogICAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXMuZGF0YTsNCiAgICAgICAgICB0aGlzLnJlY29yZFRvdGFsID0gcmVzLmNvdW50Ow0KICAgICAgICB9DQoNCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgICAvLyDliKDpmaTorrDlvZUNCiAgICBoYW5kbGVEZWxldGUocm93LCBpbmRleCkgew0KICAgICAgdGhpcy4kY29uZmlybSgi56Gu5a6a6KaB5Yig6Zmk6K+l5p2h6K6w5b2V5ZCXPyIsICLmj5DnpLoiLCB7DQogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwNCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsDQogICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwNCiAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICBkZWxldGVCb3Jyb3cocm93KS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICBpZiAocmVzID09PSAxKSB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuWIoOmZpOiusOW9leaIkOWKnyIpOw0KICAgICAgICAgICAgdGhpcy50YWJsZURhdGEuc3BsaWNlKGluZGV4LCAxKTsNCiAgICAgICAgICAgIC8vIOWmguaenOWIoOWujOS6hu+8jOiOt+WPluS4iuS4gOmhtQ0KICAgICAgICAgICAgaWYgKHRoaXMudGFibGVEYXRhLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICB0aGlzLnF1ZXJ5UGFyYW0ucGFnZSA9IHRoaXMucXVlcnlQYXJhbS5wYWdlIC0gMTsNCiAgICAgICAgICAgICAgdGhpcy5oYW5kbGVDdXJyZW50Q2hhbmdlKHRoaXMucXVlcnlQYXJhbS5wYWdlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5Yig6Zmk5aSx6LSlIik7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgICAvLyDliKDpmaTkuIDkupsNCiAgICBoYW5kbGVEZWxldGVTb21lKCkgew0KICAgICAgdGhpcy4kY29uZmlybSgi56Gu5a6a6KaB5Yig6Zmk6L+Z5Lqb6K6w5b2V5ZCXPyIsICLmj5DnpLoiLCB7DQogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwNCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsDQogICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwNCiAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICAvLyDojrflj5bpgInkuK3nmoTlr7nosaHmlbDnu4QNCiAgICAgICAgY29uc3QgaXRlbXMgPSB0aGlzLiRyZWZzLm11bHRpcGxlVGFibGUuc2VsZWN0aW9uOw0KICAgICAgICBkZWxldGVCb3Jyb3dzKGl0ZW1zKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICBpZiAocmVzID4gMCkgew0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLliKDpmaQiICsgcmVzICsgIuadoeiusOW9leaIkOWKnyIpOw0KICAgICAgICAgICAgaWYgKHRoaXMudGFibGVEYXRhLmxlbmd0aCA9PT0gcmVzKSB7DQogICAgICAgICAgICAgIC8v5aaC5p6c5pys6aG15YaF5a655YWo6YOo5Yig5YWJ5LqGDQogICAgICAgICAgICAgIC8v5b2T5YmN6aG15Li65LiK5LiA6aG1DQogICAgICAgICAgICAgIGlmICh0aGlzLnF1ZXJ5UGFyYW0ucGFnZSAhPT0gMCkgew0KICAgICAgICAgICAgICAgIHRoaXMucXVlcnlQYXJhbS5wYWdlID0gdGhpcy5xdWVyeVBhcmFtLnBhZ2UgLSAxOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyDph43ovb3lvZPliY3pobUNCiAgICAgICAgICAgIHRoaXMuaGFuZGxlQ3VycmVudENoYW5nZSh0aGlzLnF1ZXJ5UGFyYW0ucGFnZSk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuWIoOmZpOiusOW9leWksei0pSIpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9KTsNCiAgICB9LA0KICAgIGdvdG9QYXlJbmZvKCl7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3BheWluZm8nKTsNCg0KICAgIH0sDQoNCg0KICB9LA0KICBtb3VudGVkKCkgew0KDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIC8vIOihqOagvOaVsOaNrg0KICAgICAgdGFibGVEYXRhOiBbXSwNCiAgICAgIC8vIOiusOW9leaAu+aVsA0KICAgICAgcmVjb3JkVG90YWw6IDAsDQogICAgICAvLyDmn6Xor6Llj4LmlbANCiAgICAgIHF1ZXJ5UGFyYW06IHsNCiAgICAgICAgcGFnZTogMSwNCiAgICAgICAgbGltaXQ6IDEwLA0KICAgICAgICB1c2VyaWQ6IG51bGwsDQogICAgICAgIHVzZXJuYW1lOiBudWxsLA0KICAgICAgICBib29rbmFtZTogbnVsbCwNCiAgICAgIH0sDQogICAgfTsNCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICAvLyDojrflvpd1c2Vy5L+h5oGvDQogICAgLi4ubWFwR2V0dGVycyhbImlkIiwgIm5hbWUiLCAicm9sZXMiXSksDQogICAgcm9sZUlzQWRtaW4oKSB7DQogICAgICBpZiAodGhpcy5yb2xlc1swXSA9PT0gImFkbWluIikgcmV0dXJuIHRydWU7DQogICAgICBlbHNlIHJldHVybiBmYWxzZTsNCiAgICB9LA0KICB9LA0KICB3YXRjaDogew0KICAgICJxdWVyeVBhcmFtLnVzZXJpZCI6IHsNCiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwNCiAgICAgIGhhbmRsZXIoKSB7DQogICAgICAgIGlmICh0aGlzLnJvbGVJc0FkbWluKSB7DQogICAgICAgICAgdGhpcy5xdWVyeVBhcmFtLnVzZXJpZCA9IG51bGw7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy5xdWVyeVBhcmFtLnVzZXJpZCA9IHRoaXMuaWQ7DQogICAgICAgIH0NCiAgICAgIH0sDQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/borrow","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <!-- 顶部功能 -->\r\n    <div class=\"filter-container\" style=\"margin-bottom: 15px\">\r\n\r\n      <!-- 图书名输入 -->\r\n      <el-input\r\n        v-model=\"queryParam.bookname\"\r\n        placeholder=\"图书名\"\r\n        style=\"width: 200px\"\r\n        class=\"filter-item\"\r\n        @keyup.enter.native=\"handleFilter\"\r\n      />\r\n      <br /><br />\r\n      <!-- 一些按钮 -->\r\n      <el-button\r\n        v-waves\r\n        class=\"filter-item\"\r\n        type=\"primary\"\r\n        style=\"font-size: 18px\"\r\n        @click=\"handleFilter\"\r\n      >\r\n\r\n        搜索\r\n      </el-button>\r\n      <el-button\r\n        v-waves\r\n        class=\"filter-item\"\r\n        type=\"primary\"\r\n        style=\"font-size: 18px\"\r\n        @click=\"handleShowAll\"\r\n      >\r\n\r\n        显示全部\r\n      </el-button>\r\n\r\n    </div>\r\n\r\n    <!--数据表格-->\r\n    <el-table\r\n      ref=\"multipleTable\"\r\n      :data=\"tableData\"\r\n      border\r\n      style=\"width: 100%\"\r\n    >\r\n      <el-table-column fixed type=\"selection\" width=\"55\">\r\n      </el-table-column>\r\n\r\n      <el-table-column fixed prop=\"buyId\" label=\"购买单号\" width=\"100\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"bookName\"\r\n        label=\"图书名\"\r\n        show-overflow-tooltip\r\n      >\r\n      </el-table-column>\r\n      <el-table-column prop=\"buyNum\" label=\"购买数量\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"bookPrice\" label=\"购买价格\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"buyTime\" label=\"购买时间\">\r\n      </el-table-column>\r\n                <el-table-column\r\n                  v-if=\"!roleIsAdmin\"\r\n                  fixed=\"right\"\r\n                  label=\"操作\"\r\n                  :width=\" '320px'\"\r\n                >\r\n                  <template slot-scope=\"scope\">\r\n                    <el-button\r\n                      v-if=\"!roleIsAdmin\"\r\n                      @click=\"gotoPayInfo\"\r\n                      type=\"success\"\r\n                      style=\"font-size: 22px\"\r\n                    >再次购买</el-button>\r\n                  </template>\r\n                </el-table-column>\r\n    </el-table>\r\n\r\n    <!--分页条-->\r\n    <el-pagination\r\n      background\r\n      @size-change=\"handleSizeChange\"\r\n      @current-change=\"handleCurrentChange\"\r\n      :current-page.sync=\"queryParam.page\"\r\n      :page-sizes=\"[5, 10, 20, 50]\"\r\n      :page-size=\"queryParam.limit\"\r\n      layout=\"total, sizes, prev, pager, next, jumper\"\r\n      :total=\"recordTotal\"\r\n      style=\"margin-top: 15px\"\r\n    >\r\n    </el-pagination>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nimport permission from \"@/directive/permission/index.js\"; // 权限判断指令\r\nimport waves from \"@/directive/waves\"; // waves directive\r\nimport {\r\n  getCount,\r\n  queryBorrows,\r\n  queryBorrowsByPage,\r\n  addBorrow,\r\n  deleteBorrow,\r\n  deleteBorrows,\r\n  updateBorrow,\r\n  returnBook,\r\n} from \"@/api/borrow\";\r\n\r\n\r\nexport default {\r\n  name: \"Bookinfo\",\r\n  directives: { waves, permission },\r\n  // 创建后\r\n  created() {\r\n    // 从服务器获取数据表格第一页的信息\r\n    queryBorrowsByPage(this.queryParam).then((res) => {\r\n      console.log(\"首页数据获取成功\", res);\r\n      this.tableData = res.data;\r\n      this.recordTotal = res.count;\r\n    });\r\n  },\r\n  methods: {\r\n    // 分页大小改变监听\r\n    handleSizeChange(curSize) {\r\n      const params = this.queryParam;\r\n      params.limit = curSize;\r\n      queryBorrowsByPage(params).then((res) => {\r\n        console.log(\"分页数据获取成功\", res);\r\n        this.tableData = res.data;\r\n        this.recordTotal = res.count;\r\n\r\n      });\r\n    },\r\n\r\n    // 点击分页监听方法\r\n    handleCurrentChange(curPage) {\r\n      const params = this.queryParam;\r\n      params.page = curPage;\r\n      queryBorrowsByPage(params).then((res) => {\r\n        console.log(\"分页数据获取成功\", res);\r\n        this.tableData = res.data;\r\n        this.recordTotal = res.count;\r\n\r\n      });\r\n    },\r\n\r\n    // 搜索\r\n    handleFilter() {\r\n      this.queryParam.page = 1;\r\n      queryBorrowsByPage(this.queryParam).then((res) => {\r\n        if (res.code === 0) {\r\n          this.tableData = res.data;\r\n          this.recordTotal = res.count;\r\n        }\r\n\r\n      });\r\n    },\r\n\r\n    // 显示全部\r\n    handleShowAll() {\r\n      this.queryParam.page = 1;\r\n      this.queryParam.username = null;\r\n      this.queryParam.bookname = null;\r\n      queryBorrowsByPage(this.queryParam).then((res) => {\r\n        if (res.code === 0) {\r\n          this.tableData = res.data;\r\n          this.recordTotal = res.count;\r\n        }\r\n\r\n      });\r\n    },\r\n\r\n    // 删除记录\r\n    handleDelete(row, index) {\r\n      this.$confirm(\"确定要删除该条记录吗?\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      }).then(() => {\r\n        deleteBorrow(row).then((res) => {\r\n          if (res === 1) {\r\n            this.$message.success(\"删除记录成功\");\r\n            this.tableData.splice(index, 1);\r\n            // 如果删完了，获取上一页\r\n            if (this.tableData.length === 0) {\r\n              this.queryParam.page = this.queryParam.page - 1;\r\n              this.handleCurrentChange(this.queryParam.page);\r\n            }\r\n          } else {\r\n            this.$message.error(\"删除失败\");\r\n          }\r\n        });\r\n      });\r\n    },\r\n\r\n    // 删除一些\r\n    handleDeleteSome() {\r\n      this.$confirm(\"确定要删除这些记录吗?\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      }).then(() => {\r\n        // 获取选中的对象数组\r\n        const items = this.$refs.multipleTable.selection;\r\n        deleteBorrows(items).then((res) => {\r\n          if (res > 0) {\r\n            this.$message.success(\"删除\" + res + \"条记录成功\");\r\n            if (this.tableData.length === res) {\r\n              //如果本页内容全部删光了\r\n              //当前页为上一页\r\n              if (this.queryParam.page !== 0) {\r\n                this.queryParam.page = this.queryParam.page - 1;\r\n              }\r\n            }\r\n            // 重载当前页\r\n            this.handleCurrentChange(this.queryParam.page);\r\n          } else {\r\n            this.$message.error(\"删除记录失败\");\r\n          }\r\n        });\r\n      });\r\n    },\r\n    gotoPayInfo(){\r\n      this.$router.push('/payinfo');\r\n\r\n    },\r\n\r\n\r\n  },\r\n  mounted() {\r\n\r\n  },\r\n  data() {\r\n    return {\r\n      // 表格数据\r\n      tableData: [],\r\n      // 记录总数\r\n      recordTotal: 0,\r\n      // 查询参数\r\n      queryParam: {\r\n        page: 1,\r\n        limit: 10,\r\n        userid: null,\r\n        username: null,\r\n        bookname: null,\r\n      },\r\n    };\r\n  },\r\n  computed: {\r\n    // 获得user信息\r\n    ...mapGetters([\"id\", \"name\", \"roles\"]),\r\n    roleIsAdmin() {\r\n      if (this.roles[0] === \"admin\") return true;\r\n      else return false;\r\n    },\r\n  },\r\n  watch: {\r\n    \"queryParam.userid\": {\r\n      immediate: true,\r\n      handler() {\r\n        if (this.roleIsAdmin) {\r\n          this.queryParam.userid = null;\r\n        } else {\r\n          this.queryParam.userid = this.id;\r\n        }\r\n      },\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409eff;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  line-height: 178px;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 150px;\r\n  height: 200px;\r\n  display: block;\r\n}\r\n</style>\r\n"]}]}