{"remainingRequest":"D:\\BookManager\\BookManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\BookManager\\BookManagerVue\\src\\views\\pie\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\BookManager\\BookManagerVue\\src\\views\\pie\\index.vue","mtime":1719041856000},{"path":"D:\\BookManager\\BookManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713778494000},{"path":"D:\\BookManager\\BookManagerVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1713778492000},{"path":"D:\\BookManager\\BookManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713778494000},{"path":"D:\\BookManager\\BookManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1713778512000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KDQppbXBvcnQgKiBhcyBlY2hhcnRzIGZyb20gJ2VjaGFydHMnOw0KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsgLy8g5YGH6K6+5L2/55SoIEF4aW9zIOi/m+ihjEhUVFDor7fmsYINCmltcG9ydCB7DQogIC8vIC4uLiAo5YW25LuW5a+85YWl5L+d5oyB5LiN5Y+YKQ0KICBxdWVyeUJvb2tJbmZvcw0KfSBmcm9tICJAL2FwaS9ib29raW5mbyI7DQoNCi8vIOazqOaEj++8mui/memHjOWPquS/neeVmeS4gOS4quW8guatpeeJiOacrOeahCBnZXRQaWVDaGFydERhdGEg5Ye95pWwDQphc3luYyBmdW5jdGlvbiBnZXRQaWVDaGFydERhdGEoKSB7DQogIHRyeSB7DQogICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6OTExMS9Cb29rTWFuYWdlci9ib29rSW5mby9xdWVyeUJvb2tJbmZvcycpOw0KICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKQ0KICAgIGlmIChyZXNwb25zZSAmJiAgcmVzcG9uc2UuZGF0YSkgew0KICAgICAgY29uc3QgZm9ybWF0dGVkRGF0YSA9IHJlc3BvbnNlLmRhdGEubWFwKGl0ZW0gPT4gKHsNCiAgICAgICAgbmFtZTogaXRlbS5ib29rbmFtZSwgLy8g5YGH6K6+5ZCO56uv55qE5qCH6aKY5a2X5q615Li6dGl0bGUNCiAgICAgICAgdmFsdWU6IGl0ZW0uYm9va19udW0gLy8g5YGH6K6+5ZCO56uv55qE5pWw6YeP5a2X5q615Li6Y291bnQNCiAgICAgIH0pKTsNCiAgICAgIHJldHVybiBmb3JtYXR0ZWREYXRhOw0KICAgICAgDQogICAgfSBlbHNlIHsNCiAgICAgIGNvbnNvbGUuZXJyb3IoJ+iOt+WPluaVsOaNruWksei0pScpOw0KICAgICAgcmV0dXJuIFtdOw0KICAgIH0NCiAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICBjb25zb2xlLmVycm9yKCfor7fmsYLmlbDmja7ml7blj5HnlJ/plJnor68nLCBlcnJvcik7DQogICAgcmV0dXJuIFtdOw0KICB9DQp9DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgY2hhcnRJbnN0YW5jZTogbnVsbCwNCiAgICAgIHBpZURhdGE6IFsNCiAgICAgICAgDQogICAgICBdDQogICAgfTsNCiAgfSwNCg0KICBtZXRob2RzOiB7DQogICAgYXN5bmMgaW5pdENoYXJ0KCkgew0KICAgICAgY29uc3QgZGF0YUZyb21CYWNrZW5kID0gYXdhaXQgZ2V0UGllQ2hhcnREYXRhKCk7DQogICAgICBjb25zb2xlLmxvZyhkYXRhRnJvbUJhY2tlbmQpOw0KICAgICAgaWYgKGRhdGFGcm9tQmFja2VuZCAmJiBkYXRhRnJvbUJhY2tlbmQubGVuZ3RoID4gMCkgew0KICAgICAgICB0aGlzLnBpZURhdGEgPSBkYXRhRnJvbUJhY2tlbmQubWFwKGl0ZW0gPT4gKHsgdmFsdWU6IGl0ZW0udmFsdWUsIG5hbWU6IGl0ZW0ubmFtZSB9KSk7DQogICAgICB9DQogICAgICB0aGlzLmNoYXJ0SW5zdGFuY2UgPSBlY2hhcnRzLmluaXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BpZS1jaGFydCcpKTsNCg0KICAgICAgY29uc3Qgb3B0aW9uID0gew0KICAgICAgICB0b29sdGlwOiB7DQogICAgICAgICAgdHJpZ2dlcjogJ2l0ZW0nDQogICAgICAgIH0sDQogICAgICAgIC8vIGxlZ2VuZDogew0KICAgICAgICAvLyAgIG9yaWVudDogJ3ZlcnRpY2FsJywNCiAgICAgICAgLy8gICBsZWZ0OiAnbGVmdCcNCiAgICAgICAgLy8gfSwNCiAgICAgICAgc2VyaWVzOiBbew0KICAgICAgICAgIG5hbWU6ICforr/pl67mnaXmupAnLA0KICAgICAgICAgIHR5cGU6ICdwaWUnLA0KICAgICAgICAgIHJhZGl1czogJzUwJScsDQogICAgICAgICAgZGF0YTogdGhpcy5waWVEYXRhLA0KICAgICAgICAgIGVtcGhhc2lzOiB7DQogICAgICAgICAgICBpdGVtU3R5bGU6IHsNCiAgICAgICAgICAgICAgc2hhZG93Qmx1cjogMTAsDQogICAgICAgICAgICAgIHNoYWRvd09mZnNldFg6IDAsDQogICAgICAgICAgICAgIHNoYWRvd0NvbG9yOiAncmdiYSgwLCAwLCAwLCAwLjUpJw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfV0NCiAgICAgIH07DQogICAgICB0aGlzLmNoYXJ0SW5zdGFuY2Uuc2V0T3B0aW9uKG9wdGlvbik7DQogICAgfQ0KICB9LA0KDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5pbml0Q2hhcnQoKTsNCiAgfSwNCg0KICBiZWZvcmVEZXN0cm95KCkgew0KICAgIGlmICh0aGlzLmNoYXJ0SW5zdGFuY2UpIHsNCiAgICAgIHRoaXMuY2hhcnRJbnN0YW5jZS5kaXNwb3NlKCk7DQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/pie","sourcesContent":["<template>\r\n  <div id=\"pie-chart\" style=\"width: 600px;height:400px;\"></div>\r\n</template>\r\n\r\n<script>\r\nimport * as echarts from 'echarts';\r\nimport axios from 'axios'; // 假设使用 Axios 进行HTTP请求\r\nimport {\r\n  // ... (其他导入保持不变)\r\n  queryBookInfos\r\n} from \"@/api/bookinfo\";\r\n\r\n// 注意：这里只保留一个异步版本的 getPieChartData 函数\r\nasync function getPieChartData() {\r\n  try {\r\n    const response = await axios.get('http://localhost:9111/BookManager/bookInfo/queryBookInfos');\r\n    console.log(response)\r\n    if (response &&  response.data) {\r\n      const formattedData = response.data.map(item => ({\r\n        name: item.bookname, // 假设后端的标题字段为title\r\n        value: item.book_num // 假设后端的数量字段为count\r\n      }));\r\n      return formattedData;\r\n      \r\n    } else {\r\n      console.error('获取数据失败');\r\n      return [];\r\n    }\r\n  } catch (error) {\r\n    console.error('请求数据时发生错误', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      chartInstance: null,\r\n      pieData: [\r\n        \r\n      ]\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    async initChart() {\r\n      const dataFromBackend = await getPieChartData();\r\n      console.log(dataFromBackend);\r\n      if (dataFromBackend && dataFromBackend.length > 0) {\r\n        this.pieData = dataFromBackend.map(item => ({ value: item.value, name: item.name }));\r\n      }\r\n      this.chartInstance = echarts.init(document.getElementById('pie-chart'));\r\n\r\n      const option = {\r\n        tooltip: {\r\n          trigger: 'item'\r\n        },\r\n        // legend: {\r\n        //   orient: 'vertical',\r\n        //   left: 'left'\r\n        // },\r\n        series: [{\r\n          name: '访问来源',\r\n          type: 'pie',\r\n          radius: '50%',\r\n          data: this.pieData,\r\n          emphasis: {\r\n            itemStyle: {\r\n              shadowBlur: 10,\r\n              shadowOffsetX: 0,\r\n              shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n            }\r\n          }\r\n        }]\r\n      };\r\n      this.chartInstance.setOption(option);\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.initChart();\r\n  },\r\n\r\n  beforeDestroy() {\r\n    if (this.chartInstance) {\r\n      this.chartInstance.dispose();\r\n    }\r\n  }\r\n};\r\n</script>"]}]}